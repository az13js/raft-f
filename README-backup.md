# Raft一致性算法

## 什么是Raft？

Raft是一种一致性算法，它被设计得易于理解。它的容错能力和性能与Paxos算法大致一样，不同的地方是它将问题分解成相对独立的子问题，然后清晰地向所有实际系统需要的主要模块发表演讲。我们希望Raft能让更多的受众获得一致性，并且这个更广泛的受众将能够开发出比现在更高质量的基于一致性的系统。

## 坚持——什么是共识？

一致性是容错分布式系统中的一个基本问题。一致性包括多个服务器就价值达成一致。一旦他们对一个价值做出决定，这个决定就是最终的。当大多数服务器可用时，典型的一致性算法会取得进展；例如，一个由5台服务器组成的集群可以继续运行，即使有2台服务器出现故障。如果更多的服务器出现故障，它们将停止前进（但永远不会返回错误的结果）。

一致性通常出现在复制状态机的上下文中，复制状态机是构建容错系统的一般方法。每个服务器都有一个状态机和一个日志。状态机是我们希望实现容错的组件，例如哈希表。在客户机看来，即使集群中的少数服务器出现故障，它们仍在与单个可靠的状态机进行交互。每个状态机从其日志中获取输入命令。在我们的哈希表示例中，日志将包含诸如set x to 3这样的命令。一致性算法用于商定服务器日志中的命令。一致性算法必须确保，如果任何状态机将set x应用于3作为第n个命令，则任何其他状态机都不会应用不同的第n个命令。结果，每个状态机处理相同的命令序列，从而产生相同的结果序列并到达相同的状态序列。

## Raft可视化

这里有一个Raft集群在您的浏览器中运行。你可以和它互动，看看木筏在起作用。左边显示了五台服务器，右边显示了它们的日志。我们希望很快能制作一个剧本来解释发生了什么。这个可视化（raftscope）仍然是非常粗糙的边缘；拉请求将是非常受欢迎的。

数据的秘密生命是raft的另一种可视化。它的指导性更强，交互性更低，所以它可能是一个更温和的起点。



[https://raft.github.io](The Raft Consensus Algorithm)